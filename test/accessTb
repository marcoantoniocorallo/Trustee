(*
(* Closure of checkpwd *)
let trust pwd = {
  let secret pass = "abcd" in

  let fun checkpwd (guess : string) : bool = pass = guess in
  handle: {checkpwd}
} in pwd.checkpwd
*)
(*
(* Failure! Secret variable access *)
let trust pwd = {
  let secret pass = "abcd" in

  let fun checkpwd (guess : string) : bool = pass = guess in
  handle: {checkpwd}
} in pwd.pass
*)

(*
(* a variable defined inside the block requires an external var *)
let a = "pippo" in 
let trust pwd = {
  let secret pass = "abcd" in

  let fun checkpwd (guess : string) : bool = a = guess in
  handle: {checkpwd}
} in pwd.checkpwd "tt"
*)

(* Field not found *)
(*
let a = "pippo" in 
let trust pwd = {
  let secret pass = "abcd" in

  let fun checkpwd (guess : string) : bool = a = guess in
  handle: {checkpwd}
} in pwd.a "tt"
*)

(* FAILURE! pass is still secret even if has not keyword (i.e. is not handled) *)
(*
let trust pwd = {
  let pass = "abcd" in

  let fun checkpwd (guess : string) : bool = guess = pass in
  handle: {checkpwd}
} in pwd.pass
 *)

 (* syntax error: handle list canno be empty *)
 (*
 let trust pwd = {
  let pass = "abcd" in

  let fun checkpwd (guess : string) : bool = guess = pass in
  handle: {}
} in pwd
 *)

(* more functions into handle *)
(*
 let trust pwd = {
  let pass = "abcd" in

  let fun checkpwd (guess : string) : bool = guess = pass in
  let fun checkpwd2 : bool = true in
  handle: {checkpwd; checkpwd2}
} in pwd.checkpwd2
*)